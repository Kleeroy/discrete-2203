<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discrete Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4">Discrete Calculator</h1>
        
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="prime-tab" data-bs-toggle="tab" href="#prime" role="tab" aria-controls="prime" aria-selected="true">Prime Numbers</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="crt-tab" data-bs-toggle="tab" href="#crt" role="tab" aria-controls="crt" aria-selected="false">Chinese Remainder</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="exponent-tab" data-bs-toggle="tab" href="#exponent" role="tab" aria-controls="exponent" aria-selected="false">Exponentiation</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="fermat-tab" data-bs-toggle="tab" href="#fermat" role="tab" aria-controls="fermat" aria-selected="false">Fermat's Theorem</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="caesar-tab" data-bs-toggle="tab" href="#caesar" role="tab" aria-controls="caesar" aria-selected="false">Caesar Cipher</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="rsa-tab" data-bs-toggle="tab" href="#rsa" role="tab" aria-controls="rsa" aria-selected="false">RSA</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="matrix-tab" data-bs-toggle="tab" href="#matrix" role="tab" aria-controls="matrix" aria-selected="false">Matrices</a>
            </li>
        </ul>
        
        <div class="tab-content p-3 border border-top-0 rounded-bottom" id="myTabContent">
            <!-- Prime Numbers Tab -->
            <div class="tab-pane fade show active" id="prime" role="tabpanel" aria-labelledby="prime-tab">
                <div class="row">
                    <div class="col-md-6">
                        <h3>Prime Factorization</h3>
                        <div class="form-group">
                            <label for="prime-number-input">Enter a number:</label>
                            <input type="number" class="form-control" id="prime-number-input" min="2">
                        </div>
                        <button id="prime-factorize-btn" class="btn btn-primary">Factorize</button>
                        
                        <div class="result-box mt-3">
                            <h5>Division Method:</h5>
                            <div id="division-method-result"></div>
                            
                            <h5 class="mt-3">Prime Factors:</h5>
                            <div id="prime-factors-result"></div>
                            
                            <h5 class="mt-3">Factor Tree:</h5>
                            <div class="factor-tree" id="factor-tree-result"></div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <h3>Prime Checker</h3>
                        <div class="form-group">
                            <label for="prime-check-input">Enter a number:</label>
                            <input type="number" class="form-control" id="prime-check-input">
                        </div>
                        <button id="prime-check-btn" class="btn btn-primary">Check</button>
                        
                        <div class="result-box mt-3">
                            <div id="prime-check-result"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chinese Remainder Theorem Tab -->
            <div class="tab-pane fade" id="crt" role="tabpanel" aria-labelledby="crt-tab">
                <h3>Chinese Remainder Theorem</h3>
                <p>Solve x ≡ a₁ mod m₁ and x ≡ a₂ mod m₂</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="crt-a1">a₁:</label>
                            <input type="number" class="form-control" id="crt-a1">
                        </div>
                        <div class="form-group">
                            <label for="crt-m1">m₁:</label>
                            <input type="number" class="form-control" id="crt-m1">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="crt-a2">a₂:</label>
                            <input type="number" class="form-control" id="crt-a2">
                        </div>
                        <div class="form-group">
                            <label for="crt-m2">m₂:</label>
                            <input type="number" class="form-control" id="crt-m2">
                        </div>
                    </div>
                </div>
                
                <button id="crt-calculate-btn" class="btn btn-primary">Calculate</button>
                
                <div class="result-box mt-3">
                    <div id="crt-result"></div>
                </div>
            </div>

            <!-- Exponentiation Tab -->
            <div class="tab-pane fade" id="exponent" role="tabpanel" aria-labelledby="exponent-tab">
                <h3>Exponentiation Methods</h3>
                
                <ul class="nav nav-tabs" id="exponentTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="naive-tab" data-bs-toggle="tab" href="#naive" role="tab">Naïve Method</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="squaring-tab" data-bs-toggle="tab" href="#squaring" role="tab">Exponentiation by Squaring</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="modular-tab" data-bs-toggle="tab" href="#modular" role="tab">Modular Exponentiation</a>
                    </li>
                </ul>
                
                <div class="tab-content p-3 border border-top-0 rounded-bottom">
                    <!-- Naïve Method -->
                    <div class="tab-pane fade show active" id="naive" role="tabpanel">
                        <div class="form-group">
                            <label for="naive-base">Base:</label>
                            <input type="number" class="form-control" id="naive-base">
                        </div>
                        <div class="form-group">
                            <label for="naive-exponent">Exponent:</label>
                            <input type="number" class="form-control" id="naive-exponent">
                        </div>
                        <button id="naive-exponent-btn" class="btn btn-primary">Calculate</button>
                        
                        <div class="result-box mt-3">
                            <div id="naive-result"></div>
                        </div>
                    </div>
                    
                    <!-- Exponentiation by Squaring -->
                    <div class="tab-pane fade" id="squaring" role="tabpanel">
                        <div class="form-group">
                            <label for="squaring-base">Base:</label>
                            <input type="number" class="form-control" id="squaring-base">
                        </div>
                        <div class="form-group">
                            <label for="squaring-exponent">Exponent:</label>
                            <input type="number" class="form-control" id="squaring-exponent">
                        </div>
                        <button id="squaring-exponent-btn" class="btn btn-primary">Calculate</button>
                        
                        <div class="result-box mt-3">
                            <div id="squaring-result"></div>
                        </div>
                    </div>
                    
                    <!-- Modular Exponentiation -->
                    <div class="tab-pane fade" id="modular" role="tabpanel">
                        <div class="form-group">
                            <label for="modular-base">Base:</label>
                            <input type="number" class="form-control" id="modular-base">
                        </div>
                        <div class="form-group">
                            <label for="modular-exponent">Exponent:</label>
                            <input type="number" class="form-control" id="modular-exponent">
                        </div>
                        <div class="form-group">
                            <label for="modular-modulus">Modulus:</label>
                            <input type="number" class="form-control" id="modular-modulus">
                        </div>
                        <button id="modular-exponent-btn" class="btn btn-primary">Calculate</button>
                        
                        <div class="result-box mt-3">
                            <div id="modular-result"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fermat's Little Theorem Tab -->
            <div class="tab-pane fade" id="fermat" role="tabpanel" aria-labelledby="fermat-tab">
                <h3>Fermat's Little Theorem</h3>
                <p>For a prime p and integer a not divisible by p: a^(p-1) ≡ 1 mod p</p>
                <div class="form-group">
                    <label for="fermat-a">a:</label>
                    <input type="number" class="form-control" id="fermat-a">
                </div>
                <div class="form-group">
                    <label for="fermat-p">p (must be prime):</label>
                    <input type="number" class="form-control" id="fermat-p">
                </div>

                <button id="fermat-calculate-btn" class="btn btn-primary">Verify</button>

                <div class="result-box mt-3">
                    <div id="fermat-result"></div>
                </div>
            </div>

            <!-- Caesar Cipher Tab -->
            <div class="tab-pane fade" id="caesar" role="tabpanel" aria-labelledby="caesar-tab">
                <h3>Caesar Cipher</h3>
                <div class="form-group">
                    <label for="caesar-text">Text:</label>
                    <input type="text" class="form-control" id="caesar-text">
                </div>
                <div class="form-group">
                    <label for="caesar-shift">Shift (0-25):</label>
                    <input type="number" class="form-control" id="caesar-shift" min="0" max="25">
                </div>

                <button id="caesar-encrypt-btn" class="btn btn-primary">Encrypt</button>
                <button id="caesar-decrypt-btn" class="btn btn-secondary">Decrypt</button>

                <div class="result-box mt-3">
                    <div id="caesar-result"></div>
                </div>
            </div>

            <!-- RSA Tab -->
            <div class="tab-pane fade" id="rsa" role="tabpanel" aria-labelledby="rsa-tab">
                <h3>RSA Cryptography</h3>

                <ul class="nav nav-tabs" id="rsaTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="generate-tab" data-bs-toggle="tab" href="#generate" role="tab">Key Generation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="encrypt-tab" data-bs-toggle="tab" href="#encrypt" role="tab">Encryption</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="decrypt-tab" data-bs-toggle="tab" href="#decrypt" role="tab">Decryption</a>
                    </li>
                </ul>

                <div class="tab-content p-3 border border-top-0 rounded-bottom">
                    <!-- Key Generation -->
                    <div class="tab-pane fade show active" id="generate" role="tabpanel">
                        <div class="form-group">
                            <label for="rsa-p">Prime p:</label>
                            <input type="number" class="form-control" id="rsa-p">
                        </div>
                        <div class="form-group">
                            <label for="rsa-q">Prime q:</label>
                            <input type="number" class="form-control" id="rsa-q">
                        </div>
                        <button id="rsa-generate-btn" class="btn btn-primary">Generate Keys</button>
                        
                        <div class="result-box mt-3">
                            <div id="rsa-result"></div>
                        </div>
                        
                        <div class="form-group mt-3">
                            <label for="rsa-public-key">Public Key (e,n):</label>
                            <input type="text" class="form-control" id="rsa-public-key" readonly>
                        </div>
                        <div class="form-group">
                            <label for="rsa-private-key">Private Key (d,n):</label>
                            <input type="text" class="form-control" id="rsa-private-key" readonly>
                        </div>
                    </div>
                    
                    <!-- Encryption -->
                    <div class="tab-pane fade" id="encrypt" role="tabpanel" aria-labelledby="encrypt-tab">
                        <div class="form-group">
                            <label for="rsa-message">Message to encrypt:</label>
                            <input type="text" class="form-control" id="rsa-message">
                        </div>
                        <div class="form-group">
                            <label for="rsa-public-key-encrypt">Public Key (e,n):</label>
                            <input type="text" class="form-control" id="rsa-public-key-encrypt" placeholder="e.g., 5,3233">
                        </div>
                        <button id="rsa-encrypt-btn" class="btn btn-primary">Encrypt</button>
                        
                        <!-- Encryption Output -->
                        <div class="result-box mt-3">
                            <div id="rsa-encryption-result"></div>
                        </div>
                    </div>
                    
                    <!-- Decryption -->
                    <div class="tab-pane fade" id="decrypt" role="tabpanel" aria-labelledby="decrypt-tab">
                        <div class="form-group">
                            <label for="rsa-encrypted">Encrypted message (space-separated numbers):</label>
                            <input type="text" class="form-control" id="rsa-encrypted">
                        </div>
                        <div class="form-group">
                            <label for="rsa-private-key-decrypt">Private Key (d,n):</label>
                            <input type="text" class="form-control" id="rsa-private-key-decrypt" placeholder="e.g., 2753,3233">
                        </div>
                        <button id="rsa-decrypt-btn" class="btn btn-primary">Decrypt</button>
                        
                        <!-- Decryption Output -->
                        <div class="result-box mt-3">
                            <div id="rsa-decryption-result"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Matrix Tab -->
            <div class="tab-pane fade" id="matrix" role="tabpanel" aria-labelledby="matrix-tab">
                <h3>Matrices</h3>
                <div class="form-group">
                    <label for="matrix-rows">Rows:</label>
                    <input type="number" class="form-control" id="matrix-rows" min="1" value="2">
                </div>
                <div class="form-group">
                    <label for="matrix-cols">Columns:</label>
                    <input type="number" class="form-control" id="matrix-cols" min="1" value="2">
                </div>
                <button id="matrix-create-btn" class="btn btn-primary">Create Matrix Inputs</button>

                <div id="matrix-inputs" class="mt-3"></div>

                <!-- Add sections for matrix inputs and calculated output -->
                <div class="mt-3">
                    <h5>Matrix Inputs:</h5>
                    <div id="matrix-inputs-container"></div>
                </div>

                <div class="mt-3">
                    <h5>Matrix Result:</h5>
                    <table id="matrix-display" class="table table-bordered"></table>
                </div>

                <div class="form-group mt-3">
                    <label for="matrix-operation">Operation:</label>
                    <select class="form-control" id="matrix-operation">
                        <option value="add">Addition (A + B)</option>
                        <option value="subtract">Subtraction (A - B)</option>
                        <option value="multiply">Multiplication (A × B)</option>
                        <option value="scalar">Scalar Multiplication (k × A)</option>
                        <option value="transpose">Transpose (Aᵀ)</option>
                        <option value="determinant">Determinant (|A|)</option>
                    </select>
                </div>
                <button id="matrix-calculate-btn" class="btn btn-primary">Calculate</button>

                <div class="result-box mt-3">
                    <div id="matrix-result"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const matrixCreateBtn = document.getElementById('matrix-create-btn');
            const matrixInputsContainer = document.getElementById('matrix-inputs-container');
            const matrixCalculateBtn = document.getElementById('matrix-calculate-btn');
            const matrixResult = document.getElementById('matrix-result');

            // Create matrix inputs dynamically for Matrix A and Matrix B
            matrixCreateBtn.addEventListener('click', () => {
                const rows = parseInt(document.getElementById('matrix-rows').value, 10);
                const cols = parseInt(document.getElementById('matrix-cols').value, 10);
                matrixInputsContainer.innerHTML = '';

                ['A', 'B'].forEach(matrixName => {
                    const matrixTitle = document.createElement('h5');
                    matrixTitle.textContent = `Matrix ${matrixName}:`;
                    matrixInputsContainer.appendChild(matrixTitle);

                    for (let i = 0; i < rows; i++) {
                        const rowDiv = document.createElement('div');
                        rowDiv.className = 'row mb-2';
                        for (let j = 0; j < cols; j++) {
                            const input = document.createElement('input');
                            input.type = 'number';
                            input.className = 'form-control col';
                            input.style.width = '60px';
                            input.style.display = 'inline-block';
                            input.placeholder = `${matrixName}[${i + 1},${j + 1}]`;
                            input.dataset.matrix = matrixName;
                            rowDiv.appendChild(input);
                        }
                        matrixInputsContainer.appendChild(rowDiv);
                    }
                });
            });

            // Handle matrix operations
            matrixCalculateBtn.addEventListener('click', () => {
                const operation = document.getElementById('matrix-operation').value;
                const inputs = matrixInputsContainer.querySelectorAll('input');
                const rows = parseInt(document.getElementById('matrix-rows').value, 10);
                const cols = parseInt(document.getElementById('matrix-cols').value, 10);

                // Collect matrix data
                const matrices = { A: [], B: [] };
                ['A', 'B'].forEach(matrixName => {
                    const matrix = [];
                    for (let i = 0; i < rows; i++) {
                        const row = [];
                        for (let j = 0; j < cols; j++) {
                            const input = Array.from(inputs).find(input => input.dataset.matrix === matrixName && input.placeholder === `${matrixName}[${i + 1},${j + 1}]`);
                            const value = parseFloat(input.value) || 0;
                            row.push(value);
                        }
                        matrix.push(row);
                    }
                    matrices[matrixName] = matrix;
                });

                // Perform operations
                let result = [];
                if (operation === 'add') {
                    for (let i = 0; i < rows; i++) {
                        const row = [];
                        for (let j = 0; j < cols; j++) {
                            row.push(matrices.A[i][j] + matrices.B[i][j]);
                        }
                        result.push(row);
                    }
                } else if (operation === 'subtract') {
                    for (let i = 0; i < rows; i++) {
                        const row = [];
                        for (let j = 0; j < cols; j++) {
                            row.push(matrices.A[i][j] - matrices.B[i][j]);
                        }
                        result.push(row);
                    }
                } else if (operation === 'transpose') {
                    for (let i = 0; i < cols; i++) {
                        const row = [];
                        for (let j = 0; j < rows; j++) {
                            row.push(matrices.A[j][i]);
                        }
                        result.push(row);
                    }
                } else if (operation === 'multiply') {
                    if (matrices.A[0].length !== matrices.B.length) {
                        matrixResult.innerHTML = '<h5>Error: Columns of A must match rows of B for multiplication.</h5>';
                        return;
                    }
                    for (let i = 0; i < rows; i++) {
                        const row = [];
                        for (let j = 0; j < cols; j++) {
                            let sum = 0;
                            for (let k = 0; k < matrices.A[0].length; k++) {
                                sum += matrices.A[i][k] * matrices.B[k][j];
                            }
                            row.push(sum);
                        }
                        result.push(row);
                    }
                } else if (operation === 'scalar') {
                    const scalar = parseFloat(prompt('Enter scalar value:')) || 1;
                    for (let i = 0; i < rows; i++) {
                        const row = [];
                        for (let j = 0; j < cols; j++) {
                            row.push(scalar * matrices.A[i][j]);
                        }
                        result.push(row);
                    }
                } else if (operation === 'determinant') {
                    if (rows !== cols) {
                        matrixResult.innerHTML = '<h5>Error: Determinant can only be calculated for square matrices.</h5>';
                        return;
                    }
                    const determinant = (matrix) => {
                        if (matrix.length === 1) return matrix[0][0];
                        let det = 0;
                        for (let i = 0; i < matrix.length; i++) {
                            const subMatrix = matrix.slice(1).map(row => row.filter((_, colIndex) => colIndex !== i));
                            det += matrix[0][i] * determinant(subMatrix) * (i % 2 === 0 ? 1 : -1);
                        }
                        return det;
                    };
                    matrixResult.innerHTML = `<h5>Determinant: ${determinant(matrices.A)}</h5>`;
                    return;
                }

                // Display result in plain text format
                matrixResult.innerHTML = '<h5>Result:</h5>';
                result.forEach(row => {
                    matrixResult.innerHTML += row.join(' ') + '<br>';
                });
            });

            const modularExponentBtn = document.getElementById('modular-exponent-btn');
            const modularResult = document.getElementById('modular-result');

            modularExponentBtn.addEventListener('click', () => {
                const base = parseInt(document.getElementById('modular-base').value, 10);
                const exponent = parseInt(document.getElementById('modular-exponent').value, 10);
                const modulus = parseInt(document.getElementById('modular-modulus').value, 10);

                if (isNaN(base) || isNaN(exponent) || isNaN(modulus) || modulus <= 0) {
                    modularResult.innerHTML = '<h5>Error: Please enter valid numbers for base, exponent, and modulus.</h5>';
                    return;
                }

                let steps = `<h5>${base}^${exponent} mod ${modulus}</h5>`;
                steps += '<h6>Step 1: Convert exponent to binary</h6>';
                const binaryExponent = exponent.toString(2);
                steps += `${exponent} = ${binaryExponent} (binary)<br>`;

                steps += '<h6>Step 2: Calculate modular powers</h6>';
                const powers = [];
                let currentPower = base;
                for (let i = 0; i < binaryExponent.length; i++) {
                    if (binaryExponent[binaryExponent.length - 1 - i] === '1') {
                        powers.push(currentPower % modulus);
                        steps += `${base}^(2^${i}) mod ${modulus} = ${currentPower % modulus}<br>`;
                    }
                    currentPower = (currentPower * currentPower) % modulus;
                }

                steps += '<h6>Step 3: Combine results</h6>';
                let result = 1;
                powers.forEach(power => {
                    result = (result * power) % modulus;
                });
                steps += `(${base}^${exponent}) mod ${modulus} = ${result}<br>`;

                steps += '<h6>Manual division:</h6>';
                steps += `${result} ÷ ${modulus} = ${Math.floor(result / modulus)} remainder ${result % modulus}<br>`;
                steps += `${result} = ${Math.floor(result / modulus)} × ${modulus} + ${result % modulus}<br>`;
                steps += `<h5>Therefore: ${base}^${exponent} mod ${modulus} = ${result % modulus}</h5>`;

                modularResult.innerHTML = steps;
            });
        });
    </script>
</body>
</html>